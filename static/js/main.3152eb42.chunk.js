(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,t,n){e.exports=n(18)},13:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);n(13);var i=n(0),a=n(10),s=n(1);function r(e){var t=Object(s.a)({},e);return i.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24"},t),i.createElement("path",{d:"M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"}))}var c=n(2),l=n(3),o=n(5),u=n(4),m=n(6),d=n(11),h=n(7),f=n(8);function v(e){var t=Object(s.a)({},e);return i.createElement("svg",Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},t),i.createElement("path",{d:"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4 17h-8v-2h8v2zm-.499-6.296l-1.298 1.296-1.203-1.204 1.298-1.296-1.298-1.296 1.203-1.204 1.298 1.296 1.296-1.296 1.203 1.204-1.297 1.296 1.297 1.296-1.202 1.204-1.297-1.296zm-7 0l-1.298 1.296-1.203-1.204 1.298-1.296-1.298-1.296 1.203-1.204 1.298 1.296 1.296-1.296 1.203 1.204-1.297 1.296 1.297 1.296-1.202 1.204-1.297-1.296z"}))}function g(e){var t=Object(s.a)({},e);return i.createElement("svg",Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},t),i.createElement("path",{d:"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.507 13.941c-1.512 1.195-3.174 1.931-5.506 1.931-2.334 0-3.996-.736-5.508-1.931l-.493.493c1.127 1.72 3.2 3.566 6.001 3.566 2.8 0 4.872-1.846 5.999-3.566l-.493-.493zm-9.007-5.941c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5-.672-1.5-1.5-1.5zm7 0c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5-.672-1.5-1.5-1.5z"}))}function p(e){var t=Object(s.a)({},e);return i.createElement("svg",Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},t),i.createElement("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 2c3.691 0 6.915 2.016 8.647 5h-17.294c1.732-2.984 4.956-5 8.647-5zm0 20c-5.514 0-10-4.486-10-10 0-1.045.163-2.052.461-3h1.859c.606 1.518 1.929 3 3.986 3 2.477 0 2.153-2.31 3.694-2.31s1.218 2.31 3.695 2.31c2.055 0 3.379-1.482 3.984-3h1.86c.298.948.461 1.955.461 3 0 5.514-4.486 10-10 10zm5.508-8.059l.492.493c-1.127 1.72-3.199 3.566-5.999 3.566-2.801 0-4.874-1.846-6.001-3.566l.492-.493c1.513 1.195 3.174 1.931 5.509 1.931 2.333 0 3.994-.736 5.507-1.931z"}))}var E,y={0:"",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight"};!function(e){e[e.RUNNING=0]="RUNNING",e[e.PAUSED=1]="PAUSED",e[e.GAME_OVER=2]="GAME_OVER",e[e.VICTORY=3]="VICTORY"}(E||(E={}));var w,k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).timerId=void 0,n.getRandomNumber=function(e){return Math.floor(Math.random()*e)},n.toMineField=function(e,t){return{isMine:!1,isFlagged:!1,isRevealed:!1,mineCounter:null,position:{x:e,y:t}}},n.isMine=function(e,t){return n.state.mineField[e][t].isMine},n.isFlagged=function(e,t){return n.state.mineField[e][t].isFlagged},n.revealCell=function(e,t){var i=n.state.mineField[e][t];i.isRevealed=!0,i.isFlagged=!1,0===n.state.mineField.reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return!e.isMine&&!e.isRevealed})).length?(n.clearTimer(),n.setState({gameStatus:E.VICTORY})):n.setState({mineField:n.state.mineField},(function(){return n.revealSurroundingCells(e,t)}))},n.state={score:0,gameStatus:E.PAUSED,rows:n.props.rows,columns:n.props.columns,mines:n.props.mines,mineField:n.generateMineField(n.props.rows,n.props.columns,n.props.mines)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.onKeyDown(t)}))}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("keydown",(function(t){return e.onKeyDown(t)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.rows,i=t.columns,a=t.mines;n===e.rows&&i===e.columns&&a===e.mines||(this.clearTimer(),this.setState(Object(f.a)({},this.state,{rows:n,columns:i,mines:a,score:0,gameStatus:E.PAUSED,mineField:this.generateMineField(n,i,a)})))}},{key:"gameOver",value:function(){this.clearTimer(),this.setState({gameStatus:E.GAME_OVER}),this.revealAllMines()}},{key:"render",value:function(){var e=this,t=this.state.mineField.map((function(t,n){var a=t.map((function(t,a){var s=e.state.mineField[n][a],r=s.isRevealed,c=s.isFlagged?" flagged":"",l=r?" revealed":"",o=s.isRevealed&&s.isMine?" mine":"",u=r&&s.mineCounter?y[s.mineCounter]:"",m=s.mineCounter&&s.isRevealed&&s.mineCounter>0?s.mineCounter:"";return i.createElement("div",{key:"cell-".concat(n,"-").concat(a),className:"grid-cell".concat(l).concat(o).concat(c," ").concat(u),onClick:function(){return e.onCellClick(n,a)},onContextMenu:function(t){return e.onCellRightClick(t,n,a)},onDoubleClick:function(t){return e.onCellDoubleClick(t,n,a)}},m)}));return i.createElement("div",{key:"row-".concat(n),className:"grid-row"},a)})),n=this.state.mineField.reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e.isFlagged&&!e.isRevealed})).length,a=this.props.mines-n,s=this.toDisplayNumber(a),r=this.toDisplayNumber(this.state.score);return i.createElement("div",{className:"game-wrapper"},i.createElement("div",{className:"mine-sweeper"},i.createElement("div",{className:"game-state"},i.createElement("div",{className:"counter"},i.createElement("span",null,s)),i.createElement("div",{className:"game-status",onClick:function(){return e.resetGame()},title:"Reset the game"},this.state.gameStatus===E.PAUSED&&i.createElement(g,null),this.state.gameStatus===E.RUNNING&&i.createElement(g,null),this.state.gameStatus===E.GAME_OVER&&i.createElement(v,null),this.state.gameStatus===E.VICTORY&&i.createElement(p,null)),i.createElement("div",{className:"timer"},i.createElement("span",null,r))),i.createElement("div",{className:"grid"},t)))}},{key:"toDisplayNumber",value:function(e){if(e>999)return"999";var t="";return e<100&&(t+="0"),e<10&&(t+="0"),t.concat(String(e))}},{key:"onKeyDown",value:function(e){this.state.gameStatus!==E.PAUSED&&82===e.keyCode&&this.resetGame()}},{key:"clearTimer",value:function(){window.clearInterval(this.timerId)}},{key:"resetGame",value:function(){this.clearTimer(),this.setState({score:0,gameStatus:E.PAUSED,mineField:this.generateMineField(this.props.rows,this.props.columns,this.props.mines)})}},{key:"placeMinesOnField",value:function(e,t,n,i){for(;i>0;){var a=this.getRandomNumber(t),s=this.getRandomNumber(n);e[a][s].isMine||(e[a][s].isMine=!0,i--)}return e}},{key:"createEmptyMineField",value:function(e,t){var n=this;return Array(e).fill(0).map((function(e,i){return Array(t).fill(0).map((function(e,t){return n.toMineField(i,t)}))}))}},{key:"generateMineField",value:function(e,t,n){return this.setMineCounters(this.placeMinesOnField(this.createEmptyMineField(e,t),e,t,n))}},{key:"updateTimer",value:function(){var e=this.state.score+1;this.setState({score:e})}},{key:"onCellClick",value:function(e,t){this.state.gameStatus===E.VICTORY||this.state.gameStatus===E.GAME_OVER||this.isFlagged(e,t)||(this.state.gameStatus!==E.RUNNING&&(this.setState({gameStatus:E.RUNNING}),this.timerId=window.setInterval(this.updateTimer.bind(this),1e3)),this.isMine(e,t)?this.gameOver():this.revealCell(e,t))}},{key:"onCellRightClick",value:function(e,t,n){e.preventDefault(),this.state.gameStatus!==E.VICTORY&&this.state.gameStatus!==E.GAME_OVER&&this.toggleFlagged(t,n)}},{key:"onCellDoubleClick",value:function(e,t,n){(e.preventDefault(),this.state.gameStatus!==E.VICTORY&&this.state.gameStatus!==E.GAME_OVER)&&(this.state.mineField[t][n].isRevealed&&this.perimeterReveal(t,n))}},{key:"revealAllMines",value:function(){var e=this.state.mineField;e.map((function(e){return e.forEach((function(e){e.isMine&&(e.isRevealed=!0,e.isFlagged=!1)}))})),this.setState({mineField:e})}},{key:"toggleFlagged",value:function(e,t){var n=this.state.mineField;n[e][t].isRevealed||(n[e][t].isFlagged=!n[e][t].isFlagged,this.setState({mineField:n}))}},{key:"perimeterReveal",value:function(e,t){var n=this,i=this.getPositionsOfSurroundingCells(e,t),a=this.state.mineField[e][t].mineCounter;i.map((function(e){var t=Object(h.a)(e,2),i=t[0],a=t[1];return n.state.mineField[i][a]})).filter((function(e){return!e.isRevealed&&e.isFlagged})).length===a&&i.map((function(e){var t=Object(h.a)(e,2),i=t[0],a=t[1];return n.state.mineField[i][a]})).filter((function(e){return!e.isRevealed&&!e.isFlagged})).forEach((function(e){e.isMine?n.gameOver():n.revealCell(e.position.x,e.position.y)}))}},{key:"revealSurroundingCells",value:function(e,t){var n=this;0===this.state.mineField[e][t].mineCounter&&this.getPositionsOfSurroundingCells(e,t).map((function(e){var t=Object(h.a)(e,2),i=t[0],a=t[1];return n.state.mineField[i][a]})).filter((function(e){return!e.isRevealed})).forEach((function(e){n.revealCell(e.position.x,e.position.y)}))}},{key:"getSurroundingCells",value:function(e,t){return[[e-1,t-1],[e,t-1],[e+1,t-1],[e-1,t],[e+1,t],[e-1,t+1],[e,t+1],[e+1,t+1]]}},{key:"setMineCounters",value:function(e){var t=this;return e.map((function(n,i){return n.map((function(n,a){return n.isMine?n:Object(f.a)({},n,{mineCounter:t.countSurroundingMines(i,a,e)})}))}))}},{key:"countSurroundingMines",value:function(e,t,n){var i=0;return this.constructSurroundingCells(e,t).forEach((function(e){n[e[0]][e[1]].isMine&&i++})),i}},{key:"constructSurroundingCells",value:function(e,t){var n=this;return this.getSurroundingCells(e,t).reduce((function(e,t){return t[0]<0?e:t[1]<0?e:t[0]>=n.props.rows?e:t[1]>=n.props.columns?e:[].concat(Object(d.a)(e),[t])}),[])}},{key:"getPositionsOfSurroundingCells",value:function(e,t){return this.constructSurroundingCells(e,t)}}]),t}(i.Component);!function(e){e[e.EASY=0]="EASY",e[e.MEDIUM=1]="MEDIUM",e[e.HARD=2]="HARD"}(w||(w={}));var C=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t);var i=(e=Object(o.a)(this,Object(u.a)(t).call(this,n))).getDifficultySettings(w.EASY),a=i.rows,s=i.columns,r=i.mines;return e.state={difficulty:w.EASY,rows:a,columns:s,mines:r},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.createElement(i.Fragment,null,i.createElement("div",{className:"header"},i.createElement("h1",null,"Minesweeper"),i.createElement("div",{className:"instructions"},i.createElement("span",null,"To flag cells use ",i.createElement("span",{className:"hotkey"},"right click"),"."),i.createElement("span",null,"To perimeter check already revealed cells use ",i.createElement("span",{className:"hotkey"},"double click"),"."),i.createElement("span",null,"To reset the game press the ",i.createElement("span",{className:"hotkey"},"R")," key or the"," ",i.createElement("span",{className:"hotkey"},"smiley")," button."))),i.createElement("div",{className:"difficulty"},i.createElement("h3",null,"Difficulty"),i.createElement("div",{className:"difficulty-container"},i.createElement("span",{className:this.state.difficulty===w.EASY?"active":"",onClick:function(){return e.setDifficulty(w.EASY)}},"Easy",i.createElement("div",{className:"difficulty-mine-container"},i.createElement("i",{className:"difficulty-mine"}))),i.createElement("span",{className:this.state.difficulty===w.MEDIUM?"active":"",onClick:function(){return e.setDifficulty(w.MEDIUM)}},"Medium",i.createElement("div",{className:"difficulty-mine-container"},i.createElement("i",{className:"difficulty-mine"}),i.createElement("i",{className:"difficulty-mine"}))),i.createElement("span",{className:this.state.difficulty===w.HARD?"active":"",onClick:function(){return e.setDifficulty(w.HARD)}},"Hard",i.createElement("div",{className:"difficulty-mine-container"},i.createElement("i",{className:"difficulty-mine"}),i.createElement("i",{className:"difficulty-mine"}),i.createElement("i",{className:"difficulty-mine"}))))),i.createElement(k,{rows:this.state.rows,columns:this.state.columns,mines:this.state.mines}))}},{key:"getDifficultySettings",value:function(e){return{0:{rows:8,columns:8,mines:10},1:{rows:16,columns:16,mines:40},2:{rows:16,columns:30,mines:99}}[e]}},{key:"setDifficulty",value:function(e){var t=this.getDifficultySettings(e),n=t.rows,i=t.columns,a=t.mines;this.setState({difficulty:e,rows:n,columns:i,mines:a})}}]),t}(i.Component),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.render(i.createElement(i.Fragment,null,i.createElement("a",{href:"https://github.com/Knochenmark/minesweeper/issues",title:"Report a bug",className:"bug"},i.createElement((function(e){var t=Object(s.a)({},e);return i.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24"},t),i.createElement("path",{d:"M7.074 1.408A1.42 1.42 0 0 1 8.505 0c.942 0 1.626.883 1.38 1.776-.093.336-.042.695.138.995.401.664 1.084 1.073 1.977 1.078.88-.004 1.572-.408 1.977-1.078.181-.299.231-.658.138-.995C13.869.884 14.551 0 15.495 0c.79 0 1.431.63 1.431 1.408 0 .675-.482 1.234-1.118 1.375a1.2 1.2 0 0 0-.769.548c-.613 1.017.193 1.917.93 2.823C14.759 6.716 13.445 7 12 7c-1.468 0-2.771-.277-3.975-.84.748-.92 1.555-1.803.935-2.83a1.195 1.195 0 0 0-.768-.548 1.414 1.414 0 0 1-1.118-1.374zM12 11c-1.724 0-3.355-.296-4.872-.882C5.805 13.05 5.849 21.091 12 21.984c6.085-.886 6.232-8.764 4.859-11.871A13.39 13.39 0 0 1 12 11zm6.319-2.314c.14.319.394.454.648.454.39 0 2.462-1.016 2.958-1.016.42 0 .817.249.98.657a1.034 1.034 0 0 1-.594 1.346l-2.231.866c-.479.186-.857.655-.765 1.333.09.659.652 1.052 1.227 1.052h2.402c.583 0 1.054.464 1.054 1.037s-.472 1.037-1.054 1.037h-2.387c-.558 0-1.147.332-1.277 1.136-.104.645.269 1.162.763 1.383l2.42 1.078c.53.236.766.851.526 1.373a1.062 1.062 0 0 1-1.395.518l-2.561-1.14c-.341-.152-.706-.062-.963.364A8.137 8.137 0 0 1 12 24a8.137 8.137 0 0 1-6.135-3.943c-.2-.342-.564-.409-.901-.259l-2.561 1.14a1.061 1.061 0 0 1-1.395-.518 1.031 1.031 0 0 1 .526-1.373l2.42-1.078c.523-.233.863-.734.751-1.462-.106-.685-.692-1.057-1.265-1.057H1.054C.472 15.452 0 14.988 0 14.415s.472-1.037 1.054-1.037h2.402c.552 0 1.129-.353 1.235-1.111.082-.58-.277-1.082-.773-1.274l-2.231-.866a1.033 1.033 0 0 1-.594-1.346c.212-.53.823-.796 1.367-.584.232.09 2.332.944 2.573.944.242 0 .501-.125.663-.491.18-.408.384-.787.601-1.146C8.005 8.502 9.887 9 12 9c2.08 0 3.986-.51 5.699-1.502.225.372.435.765.62 1.188z"}))}),null)),i.createElement("div",{className:"github-container"},i.createElement("a",{href:"https://github.com/Knochenmark",title:"Find me on Github",className:"github"},i.createElement(r,null),"Knochenmark"),i.createElement("a",{href:"https://github.com/Psyperl",title:"Find me on Github",className:"github"},i.createElement(r,null),"Psyperl")),i.createElement(C,null)),document.getElementById("root")),document.oncontextmenu=function(){return!1},function(){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/minesweeper","/service-worker.js");S?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):N(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):N(e)}))}}()}},[[12,1,2]]]);
//# sourceMappingURL=main.3152eb42.chunk.js.map